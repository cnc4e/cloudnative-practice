[Top](../README.md)

---

# プラクティスの流れ

プラクティスは章に分かれています。各章には章の説明を書いたマークダウンファイルと、プラクティスの内容を記載したissueが用意されています。対応するissueの順番は章の説明マークダウンを読んで進めてください。issueは以下の流れで対応します。

- [プラクティスの流れ](#プラクティスの流れ)
  - [issueを確認](#issueを確認)
  - [ブランチ作成](#ブランチ作成)
    - [GUIでissueから作成](#guiでissueから作成)
    - [CLIで作成](#cliで作成)
  - [コーディング](#コーディング)
  - [プルリクエスト](#プルリクエスト)
  - [レビュアーによるレビュー](#レビュアーによるレビュー)
  - [レビュー後の修正](#レビュー後の修正)
  - [レビュー完了後、プルリクエストをマージ](#レビュー完了後プルリクエストをマージ)
  - [次のissueへ](#次のissueへ)


## issueを確認

GitHubの`cloudnative-practice`リポジトリの`Issues`タブを開き、プラクティス用のissueを確認します。

各章ごとにissueが作成されているので、内容を確認し、どのプラクティスを行うか決めます。

## ブランチ作成

ブランチを作成する方法は2つあります。GUIとCLIのどちらか好きな方を選んでください。

### GUIでissueから作成

issueのページ、右メニューの`Development`にある`Create a branch`をクリックしてブランチを作成します。ブランチ名は`{issue番号}-{issueタイトル}`の形式で作成されます。`{issueタイトル}`の部分は任意の文字列に変更して良いです。

ローカルにpullして作業ブランチを変更します。

``` sh
git pull
git checkout {issue番号}-{issueタイトル}
```

### CLIで作成

- mainブランチに移動します。
  ``` sh
  git checkout main
  ```
- mainブランチを最新の状態に更新します。
  ``` sh
  git pull origin main
  ```
- ブランチを作成します。以下コマンドでブランチの作成とブランチの変更を同時に行えます。`{issueタイトル}`の部分は任意の文字列に変更して良いです。
  ``` sh
  git checkout -b {issue番号}-{issueタイトル}
  ```

## コーディング

issueの内容に従ってコーディングを行います。コードの修正と必要なら環境へのデプロイも行います。

## プルリクエスト

コーディングおよび実機での確認が完了したら、プルリクエストを作成します。以下の手順で行います。

- 変更をaddします。addの後に追加するファイルパスを指定します。`.`の場合、カレントディレクトリ以下の全ての変更をaddします。
  ``` sh
  git add .
  ```
- 変更内容をコミットします。
  ``` sh
  git commit -m "#{issue番号} メッセージ"
  ```
- 変更をリモートにpushします。
  ``` sh
  git push origin {ブランチ名}
  ```
- GitHubの`cloudnative-practice`リポジトリの`Pull requests`タブを開き、`New pull request`をクリックします。
- `compare:`の部分で先ほどpushしたブランチを選択し、`Create pull request`をクリックします。
- タイトルと説明を入力し、`Create pull request`をクリックします。
- レビュアーを指定します。レビュアーは`@{GitHubアカウント名}`の形式で指定できます。

## レビュアーによるレビュー

レビュアーがプルリクエストを確認し、コメントや修正依頼を行います。本プラクティスでは**開発のスピードと目的の明確化を重視するため**以下の観点でレビューを行います。

- レビューで**見る**観点
  - issueの内容に沿った実装になっているか
  - [コーディングルール](./coderule.md)に記載した最低限のルールに沿った実装になっているか
- レビューで**見ない**観点
  - コードの品質やベストプラクティスに沿った実装になっているか
  - コードの可読性や保守性

## レビュー後の修正

レビュアーからのコメントや修正依頼に対して、必要な修正を行います。修正が完了したら、再度コミットし、リモートにpushします。

``` sh
git add .
git commit -m "#{issue番号} 修正メッセージ"
git push origin {ブランチ名}
```

## レビュー完了後、プルリクエストをマージ

レビュアーは修正内容を確認します。追加でコメントがあれば、再度修正を行います。レビュアーが問題ないと判断したら、プルリクエストを**レビュアーがマージ**します。レビュアーはマージした旨を作業者に伝えます。これでプラクティスの対応は完了です。

## 次のissueへ

次のissueに進む前に、以下の手順を行います。
- 作業ブランチをmainに戻します。
  ``` sh
  git checkout main
  ```
- リモートのmainブランチを最新の状態に更新します。
  ``` sh
  git pull origin main
  ```
- 作業ブランチを削除します。
  ``` sh
  git branch -b {issue番号}-{issueタイトル}
  ```

---

[Top](../README.md)  
